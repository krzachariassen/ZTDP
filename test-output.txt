=== RUN   TestCreateAndGetApplication
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestCreateAndGetApplication (0.00s)
=== RUN   TestListApplications
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestListApplications (0.00s)
=== RUN   TestUpdateApplication
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestUpdateApplication (0.00s)
=== RUN   TestCreateAndGetService
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestCreateAndGetService (0.00s)
=== RUN   TestListServices
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestListServices (0.00s)
=== RUN   TestApplyGraph
⚙️  Using Redis Backend: localhost:6379
[DEBUG] Created service version node with ID: checkout-api:1.0.0, Kind: service_version
[DEBUG] Created service version node with ID: checkout-worker:1.0.0, Kind: service_version
--- PASS: TestApplyGraph (0.00s)
=== RUN   TestGetGrap
⚙️  Using Redis Backend: localhost:6379
[DEBUG] Created service version node with ID: checkout-api:1.0.0, Kind: service_version
[DEBUG] Created service version node with ID: checkout-worker:1.0.0, Kind: service_version
    api_test.go:345: Graph JSON: {"Nodes":{"checkout":{"ID":"checkout","Kind":"application","Metadata":{"name":"checkout","owner":"team-x"},"Spec":{"description":"Test application","lifecycle":{},"tags":["test"]}},"checkout-api":{"ID":"checkout-api","Kind":"service","Metadata":{"name":"checkout-api","owner":""},"Spec":{"application":"checkout","port":8080,"public":false}},"checkout-api:1.0.0":{"ID":"checkout-api:1.0.0","Kind":"service_version","Metadata":{"name":"checkout-api","owner":""},"Spec":null},"checkout-worker":{"ID":"checkout-worker","Kind":"service","Metadata":{"name":"checkout-worker","owner":""},"Spec":{"application":"checkout","port":8080,"public":false}},"checkout-worker:1.0.0":{"ID":"checkout-worker:1.0.0","Kind":"service_version","Metadata":{"name":"checkout-worker","owner":""},"Spec":null},"dev":{"ID":"dev","Kind":"environment","Metadata":{"name":"dev","owner":""},"Spec":{"description":""}},"prod":{"ID":"prod","Kind":"environment","Metadata":{"name":"prod","owner":""},"Spec":{"description":""}}},"Edges":{"checkout":[{"To":"checkout-api","Type":"owns"},{"To":"checkout-worker","Type":"owns"},{"To":"dev","Type":"allowed_in"},{"To":"prod","Type":"allowed_in"}],"checkout-api":[{"To":"checkout-api:1.0.0","Type":"has_version"}],"checkout-api:1.0.0":[{"To":"dev","Type":"deploy"},{"To":"prod","Type":"deploy"}],"checkout-worker":[{"To":"checkout-worker:1.0.0","Type":"has_version"}],"checkout-worker:1.0.0":[{"To":"dev","Type":"deploy"}]}}
--- PASS: TestGetGrap (0.00s)
=== RUN   TestHealthz
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestHealthz (0.00s)
=== RUN   TestStatusEndpoint
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestStatusEndpoint (0.00s)
=== RUN   TestGetApplicationSchema
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestGetApplicationSchema (0.00s)
=== RUN   TestGetServiceSchema
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestGetServiceSchema (0.00s)
=== RUN   TestCreateAndListEnvironments
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestCreateAndListEnvironments (0.00s)
=== RUN   TestDisallowDirectProductionDeployment
⚙️  Using Redis Backend: localhost:6379
[DEBUG] Created service version node with ID: checkout-api:2.0.0, Kind: service_version
--- PASS: TestDisallowDirectProductionDeployment (0.00s)
=== RUN   TestDisallowDeploymentToNotAllowedEnv
⚙️  Using Redis Backend: localhost:6379
[DEBUG] Created service version node with ID: checkout-api:3.0.0, Kind: service_version
--- PASS: TestDisallowDeploymentToNotAllowedEnv (0.00s)
=== RUN   TestResourceCatalogAndLinking
⚙️  Using Redis Backend: localhost:6379
--- PASS: TestResourceCatalogAndLinking (0.00s)
=== RUN   TestPolicyAPIEndpoints
⚙️  Using Redis Backend: localhost:6379
    api_test.go:577: created policy not found in list
    api_test.go:593: get policy returned wrong id: <nil>
    api_test.go:641: failed to update check status via API, status: 500, body: Failed to update check: node with ID api-check-1 already exists
--- FAIL: TestPolicyAPIEndpoints (0.00s)
FAIL
FAIL	github.com/krzachariassen/ZTDP/test/api	0.044s
FAIL
